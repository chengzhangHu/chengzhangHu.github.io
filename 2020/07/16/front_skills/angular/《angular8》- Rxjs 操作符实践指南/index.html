<!DOCTYPE html>
<html>
  <head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
  <meta name="description" content="前端框架、构建工具原理分析、端到端E2E测试、性能测试优化、Devops实践、大数据分析应用实践、可视化开发">
  <meta name="keyword" content="前端框架、构建工具原理分析、端到端E2E测试、性能测试优化、Devops实践、大数据分析应用实践、可视化开发">
  
    <link rel="shortcut icon" href="/css/images/logo.png">
  
  <title>
    
      《angular8》- Rxjs 操作符实践指南 | 前端analysis
    
  </title>
  <link href="https://cdn.bootcdn.net/ajax/libs/font-awesome/5.14.0/css/fontawesome.min.css" rel="preload" as="style">
  <link href="https://cdn.bootcdn.net/ajax/libs/nprogress/0.2.0/nprogress.min.css" rel="preload" as="style">
  <link href="https://cdn.bootcdn.net/ajax/libs/highlight.js/10.1.2/styles/tomorrow.min.css" rel="preload" as="style">
  
<link rel="stylesheet" href="/css/style.css">

  
  <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://cdn.bootcdn.net/ajax/libs/geopattern/1.2.3/js/geopattern.min.js"></script>
  <script src="https://cdn.bootcdn.net/ajax/libs/nprogress/0.2.0/nprogress.min.js"></script>
  
  
  

<meta name="generator" content="Hexo 7.2.0"></head>
<div class="wechat-share">
  <img loading="lazy" src="/css/images/logo.png" />
</div>

  <body>
    <header class="header fixed-header">
  <div class="header-container">
    <a class="home-link" href="/">
      <div class="logo"></div>
      <span>前端analysis</span>
      <span style="font-size: .8rem;margin:0 .5rem;">| 知其所以然 </span>
    </a>
    <ul class="right-list">
      
        <li class="list-item">
          
            <a href="/" class="item-link">首页</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/tags/" class="item-link">标签</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/archives/" class="item-link">归档</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/about/" class="item-link">关于</a>
          
        </li>
      
    </ul>
    <div class="menu">
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </div>
    <div class="menu-mask">
      <ul class="menu-list">
        
          <li class="menu-item">
            
              <a href="/" class="menu-link">首页</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/tags/" class="menu-link">标签</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/archives/" class="menu-link">归档</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/about/" class="menu-link">关于</a>
            
          </li>
        
      </ul>
    </div>
  </div>
</header>

    <div id="article-banner">
  <h2>《angular8》- Rxjs 操作符实践指南</h2>
  <p class="post-date">2020-07-17</p>
  <div class="arrow-down">
    <a href="javascript:;"></a>
  </div>
</div>
<main class="app-body flex-box" id="article-content">
  <!-- Article START -->
  <article class="post-article">
    <section class="markdown-content"><ul>
<li>本文目的在于介绍rxjs operators，总结下个人code实践和理解，以备以后个人查阅,code 采用ts+rollup打包方式</li>
<li>具体可以移步下方传送通道</li>
</ul>
<h2 id="Rxjs-入门"><a href="#Rxjs-入门" class="headerlink" title="Rxjs 入门"></a>Rxjs 入门</h2><p> <a href="">传送门</a></p>
<h2 id="操作符实战"><a href="#操作符实战" class="headerlink" title="操作符实战"></a>操作符实战</h2><h3 id="1-工具方法型"><a href="#1-工具方法型" class="headerlink" title="1.工具方法型"></a>1.工具方法型</h3><h4 id="count"><a href="#count" class="headerlink" title="count"></a>count</h4><ul>
<li>统计总数  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">import &#123; range &#125; from &#x27;rxjs&#x27;;</span><br><span class="line">import &#123; count &#125; from &#x27;rxjs/operators&#x27;;</span><br><span class="line"></span><br><span class="line">const numbers = range(1, 7);</span><br><span class="line">const result = numbers.pipe(count(i =&gt; i % 2 === 1));</span><br><span class="line">result.subscribe(x =&gt; console.log(x));</span><br><span class="line">// Results in:</span><br><span class="line">// 4</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="reduce"><a href="#reduce" class="headerlink" title="reduce"></a>reduce</h4><ul>
<li>累计  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">import &#123; fromEvent, interval &#125; from &#x27;rxjs&#x27;;</span><br><span class="line">import &#123; reduce, takeUntil, mapTo &#125; from &#x27;rxjs/operators&#x27;;</span><br><span class="line"></span><br><span class="line">const clicksInFiveSeconds = fromEvent(document, &#x27;click&#x27;).pipe(</span><br><span class="line">  takeUntil(interval(5000)),</span><br><span class="line">);</span><br><span class="line">const ones = clicksInFiveSeconds.pipe(mapTo(1));</span><br><span class="line">const seed = 0;</span><br><span class="line">const count = ones.pipe(reduce((acc, one) =&gt; acc + one, seed));</span><br><span class="line">count.subscribe(x =&gt; console.log(x));</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="max-min"><a href="#max-min" class="headerlink" title="max\min"></a>max\min</h4>  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">  import &#123; of,merge &#125; from &#x27;rxjs&#x27;;</span><br><span class="line">  import &#123; max,min,tap &#125; from &#x27;rxjs/operators&#x27;;</span><br><span class="line"></span><br><span class="line">  const obs$ = of(5, 4, 7, 2, 8);</span><br><span class="line">  merge(</span><br><span class="line">      obs$.pipe(max()),</span><br><span class="line">      obs$.pipe(min()),</span><br><span class="line">  ).pipe(tap((val) =&gt; &#123;</span><br><span class="line">      console.log(&quot;result....&quot;,val);</span><br><span class="line">  &#125;)).subscribe(console.log);</span><br><span class="line"></span><br><span class="line">//output</span><br><span class="line">result.... 8</span><br><span class="line">8</span><br><span class="line">result.... 2</span><br><span class="line">2</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="tap"><a href="#tap" class="headerlink" title="tap"></a>tap</h4><blockquote>
<p>日志输出<br>of 是一个个输出的</p>
</blockquote>
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">  import &#123; of,merge &#125; from &#x27;rxjs&#x27;;</span><br><span class="line">  import &#123; max,min,tap &#125; from &#x27;rxjs/operators&#x27;;</span><br><span class="line"></span><br><span class="line">  const obs$ = of(5, 4, 7, 2, 8);</span><br><span class="line">  obs$.pipe(tap(&#123;</span><br><span class="line">      next:(val) =&gt; &#123;</span><br><span class="line">          console.log(&quot;val&quot;,val);</span><br><span class="line">      &#125;,</span><br><span class="line">      error:() =&gt; &#123;</span><br><span class="line"></span><br><span class="line">      &#125;,</span><br><span class="line">      complete:() =&gt; &#123;</span><br><span class="line"></span><br><span class="line">      &#125;</span><br><span class="line">  &#125;)).subscribe(console.log)</span><br><span class="line"></span><br><span class="line">//output</span><br><span class="line">val 5</span><br><span class="line">5</span><br><span class="line">val 4</span><br><span class="line">4</span><br><span class="line">val 7</span><br><span class="line">7</span><br><span class="line">val 2</span><br><span class="line">2</span><br></pre></td></tr></table></figure>

<h4 id="repeat"><a href="#repeat" class="headerlink" title="repeat"></a>repeat</h4><blockquote>
<p>重复 &#x3D;&#x3D;&#x3D; 多次订阅</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">import &#123; tap &#125; from &#x27;rxjs/operators&#x27;;</span><br><span class="line">// RxJS v6+</span><br><span class="line">import &#123; repeat, delay &#125; from &#x27;rxjs/operators&#x27;;</span><br><span class="line">import &#123; of &#125; from &#x27;rxjs&#x27;;</span><br><span class="line"></span><br><span class="line">const delayedThing = of(&#x27;delayed value&#x27;).pipe(</span><br><span class="line">        tap(() =&gt; &#123;</span><br><span class="line">            console.log(&quot;time..1.&quot;,new Date().toLocaleTimeString());</span><br><span class="line">        &#125;),</span><br><span class="line">        delay(2000)</span><br><span class="line">        );</span><br><span class="line"></span><br><span class="line">delayedThing</span><br><span class="line">  .pipe(</span><br><span class="line">    tap(() =&gt; &#123;</span><br><span class="line">        console.log(&quot;time...2&quot;,new Date().toLocaleTimeString());</span><br><span class="line">    &#125;),</span><br><span class="line">      repeat(3)</span><br><span class="line">    )</span><br><span class="line">  .subscribe(console.log);</span><br><span class="line"></span><br><span class="line">//output </span><br><span class="line">time..1. 4:42:45 PM</span><br><span class="line">time...2 4:42:47 PM</span><br><span class="line">delayed value</span><br><span class="line">time..1. 4:42:47 PM</span><br><span class="line">time...2 4:42:49 PM</span><br><span class="line">delayed value</span><br><span class="line">time..1. 4:42:49 PM</span><br><span class="line">time...2 4:42:51 PM</span><br><span class="line">delayed value</span><br></pre></td></tr></table></figure>


<h4 id="subscribeOn，-observeOn"><a href="#subscribeOn，-observeOn" class="headerlink" title="subscribeOn， observeOn"></a>subscribeOn， observeOn</h4><ul>
<li>调整执行时机，  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">import &#123; of, merge &#125; from &#x27;rxjs&#x27;;</span><br><span class="line"></span><br><span class="line">const a = of(1, 2, 3, 4);</span><br><span class="line">const b = of(5, 6, 7, 8, 9);</span><br><span class="line">merge(a, b).subscribe(console.log);</span><br><span class="line">// 1 2 3 4 5 6 7 8 9</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">import &#123; of, merge, asyncScheduler &#125; from &#x27;rxjs&#x27;;</span><br><span class="line">import &#123; subscribeOn &#125; from &#x27;rxjs/operators&#x27;;</span><br><span class="line"></span><br><span class="line">const a = of(1, 2, 3, 4).pipe(subscribeOn(asyncScheduler));</span><br><span class="line">const b = of(5, 6, 7, 8, 9);</span><br><span class="line">merge(a, b).subscribe(console.log);</span><br><span class="line">//5 6 7 8 9 1 2 3 4</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">import &#123; interval &#125; from &#x27;rxjs&#x27;;</span><br><span class="line">import &#123; observeOn &#125; from &#x27;rxjs/operators&#x27;;</span><br><span class="line"></span><br><span class="line">const intervals = interval(10);                // Intervals are scheduled</span><br><span class="line">                                              // with async scheduler by default...</span><br><span class="line">intervals.pipe(</span><br><span class="line">  observeOn(animationFrameScheduler),          // ...but we will observe on animationFrame</span><br><span class="line">)                                              // scheduler to ensure smooth animation.</span><br><span class="line">.subscribe(val =&gt; &#123;</span><br><span class="line">  someDiv.style.height = val + &#x27;px&#x27;;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="materialize"><a href="#materialize" class="headerlink" title="materialize"></a>materialize</h4><ul>
<li>用默认对象包箱, dematerialize 开箱  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">import &#123; of &#125; from &#x27;rxjs&#x27;;</span><br><span class="line">import &#123; materialize, map &#125; from &#x27;rxjs/operators&#x27;;</span><br><span class="line"></span><br><span class="line">const letters = of(&#x27;a&#x27;, &#x27;b&#x27;, &#x27;13&#x27;, &#x27;d&#x27;);</span><br><span class="line">const upperCase = letters.pipe(map(x =&gt; x.toUpperCase()));</span><br><span class="line">const materialized = upperCase.pipe(materialize());</span><br><span class="line">materialized.subscribe(x =&gt; console.log(x));</span><br><span class="line"></span><br><span class="line">Notification &#123; kind: &#x27;N&#x27;, value: &#x27;A&#x27;, error: undefined, hasValue: true &#125;</span><br><span class="line">Notification &#123; kind: &#x27;N&#x27;, value: &#x27;B&#x27;, error: undefined, hasValue: true &#125;</span><br><span class="line">Notification &#123; kind: &#x27;N&#x27;, value: &#x27;13&#x27;, error: undefined, hasValue: true &#125;</span><br><span class="line">Notification &#123; kind: &#x27;N&#x27;, value: &#x27;D&#x27;, error: undefined, hasValue: true &#125;</span><br><span class="line">Notification &#123; kind: &#x27;C&#x27;, value: undefined, error: undefined, hasValue: false &#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="timestamp"><a href="#timestamp" class="headerlink" title="timestamp"></a>timestamp</h4><ul>
<li>添加时间戳    <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"> import &#123; of &#125; from &#x27;rxjs&#x27;;</span><br><span class="line"> import &#123; materialize, map, timestamp, tap &#125; from &#x27;rxjs/operators&#x27;;</span><br><span class="line"></span><br><span class="line"> const letters = of(&#x27;a&#x27;, &#x27;b&#x27;, &#x27;13&#x27;, &#x27;d&#x27;);</span><br><span class="line"></span><br><span class="line"> const times = letters.pipe(timestamp());</span><br><span class="line"> times.subscribe(res =&gt; &#123;</span><br><span class="line">     console.log(&quot;res...&quot;,res)</span><br><span class="line"> &#125;);</span><br><span class="line"></span><br><span class="line">//output </span><br><span class="line"> res... Timestamp &#123; value: &#x27;a&#x27;, timestamp: 1594074567694 &#125;</span><br><span class="line"> res... Timestamp &#123; value: &#x27;b&#x27;, timestamp: 1594074567700 &#125;</span><br><span class="line"> res... Timestamp &#123; value: &#x27;13&#x27;, timestamp: 1594074567700 &#125;</span><br><span class="line"> res... Timestamp &#123; value: &#x27;d&#x27;, timestamp: 1594074567700 &#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="toArray"><a href="#toArray" class="headerlink" title="toArray"></a>toArray</h4><blockquote>
<p>最终结果toArray，取决于source是一个个产生的，map,filter,interval<br> <img src="https://user-gold-cdn.xitu.io/2020/7/17/17359bee0335b95b?w=680&h=287&f=png&s=30606" width="450" height="300"></p>
</blockquote>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">import &#123; interval &#125; from &#x27;rxjs&#x27;;</span><br><span class="line">import &#123; toArray, take &#125; from &#x27;rxjs/operators&#x27;;</span><br><span class="line"></span><br><span class="line">const source = interval(1000);</span><br><span class="line">const example = source.pipe(</span><br><span class="line">  take(10),</span><br><span class="line">  toArray()</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">const subscribe = example.subscribe(val =&gt; console.log(val));</span><br><span class="line"></span><br><span class="line">// output: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]</span><br></pre></td></tr></table></figure>
<blockquote>
<p>结合 filter、map</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">import &#123; from &#125; from &#x27;rxjs&#x27;</span><br><span class="line">import &#123; filter , tap, toArray, map &#125; from &#x27;rxjs/operators&#x27;</span><br><span class="line"></span><br><span class="line">const arr = [&#123;</span><br><span class="line">    a:1,</span><br><span class="line">    b:2,</span><br><span class="line">    c:3</span><br><span class="line">&#125;,&#123;</span><br><span class="line">    a:2,</span><br><span class="line">    b:4,</span><br><span class="line">    c:5,</span><br><span class="line">&#125;,&#123;</span><br><span class="line">    a:7,</span><br><span class="line">    b:10,</span><br><span class="line">    c:10</span><br><span class="line">&#125;];</span><br><span class="line"></span><br><span class="line">from(arr).pipe(</span><br><span class="line">    map((item) =&gt; &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">            a:item.a,</span><br><span class="line">            b:item.b * 2,</span><br><span class="line">            c: item.c</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;),</span><br><span class="line">    tap((val) =&gt; &#123;</span><br><span class="line">        console.log(&quot;map result ....&quot;,val);</span><br><span class="line">    &#125;),</span><br><span class="line">    toArray()</span><br><span class="line">).subscribe(console.log)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">from(arr).pipe(</span><br><span class="line">    filter( (item) =&gt; &#123;</span><br><span class="line">        return item.a &gt; 1;</span><br><span class="line">    &#125;),</span><br><span class="line">    tap( (val) =&gt; &#123;</span><br><span class="line">        console.log(&quot;the result is &quot;,val);</span><br><span class="line">    &#125;),</span><br><span class="line">    toArray(),</span><br><span class="line">).subscribe(console.log)</span><br></pre></td></tr></table></figure>

<h3 id="延迟类"><a href="#延迟类" class="headerlink" title="延迟类"></a>延迟类</h3><h4 id="delay"><a href="#delay" class="headerlink" title="delay"></a>delay</h4><ul>
<li>延迟执行，但是忽略error ?    <img src="https://user-gold-cdn.xitu.io/2020/7/17/17359bee04ec6430?w=1280&h=540&f=png&s=40648" width="450" height="300"/></li>
</ul>
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">import &#123; of &#125; from &#x27;rxjs&#x27;;</span><br><span class="line">import &#123; tap, delay &#125; from &#x27;rxjs/operators&#x27;;</span><br><span class="line"></span><br><span class="line">const obs$ = of([1,2]);</span><br><span class="line">obs$.pipe(tap(res =&gt; &#123;</span><br><span class="line">    console.log(&quot;get value from of....&quot;,new Date().toLocaleTimeString());</span><br><span class="line">&#125;),delay(2000),tap(() =&gt; &#123; # 延迟执行，也可以变成随机延迟。   delayWhen(event =&gt; interval(Math.random() * 5000))</span><br><span class="line">    console.log(&quot;get value from of....&quot;,new Date().toLocaleTimeString());</span><br><span class="line">&#125;)).subscribe(res =&gt; &#123;</span><br><span class="line">    console.log(&quot;of res...;.&quot;,res);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">//output</span><br><span class="line">get value from of.... 7:52:27 AM</span><br><span class="line">get value from of.... 7:52:29 AM</span><br><span class="line">of res...;. [ 1, 2 ]</span><br></pre></td></tr></table></figure>
<h4 id="delayWhen"><a href="#delayWhen" class="headerlink" title="delayWhen"></a>delayWhen</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">import &#123; interval, timer &#125; from &#x27;rxjs&#x27;;</span><br><span class="line">import &#123; delayWhen &#125; from &#x27;rxjs/operators&#x27;;</span><br><span class="line"></span><br><span class="line">const message = interval(1000);</span><br><span class="line">const delayForFiveSeconds = () =&gt; timer(5000);</span><br><span class="line">const delayWhenExample = message.pipe(delayWhen(delayForFiveSeconds));</span><br><span class="line">const subscribe = delayWhenExample.subscribe(val =&gt; console.log(val));</span><br><span class="line"></span><br><span class="line">//output</span><br><span class="line">5s延迟....</span><br><span class="line"></span><br><span class="line">0</span><br><span class="line">1</span><br><span class="line">2</span><br></pre></td></tr></table></figure>
<h4 id="timeout、timeInterval"><a href="#timeout、timeInterval" class="headerlink" title="timeout、timeInterval"></a>timeout、timeInterval</h4><ul>
<li>timeInterval 输出对象，timeout输出值 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"> import &#123; timeInterval, timeout &#125; from &quot;rxjs/operators&quot;;</span><br><span class="line"> import &#123; interval &#125; from &quot;rxjs&quot;;</span><br><span class="line"></span><br><span class="line"> const seconds = interval(1000);</span><br><span class="line"></span><br><span class="line"> seconds.pipe(timeInterval())</span><br><span class="line"> .subscribe(</span><br><span class="line">     value =&gt; &#123;</span><br><span class="line">         console.log(&quot;time.....&quot;);</span><br><span class="line">         console.log(value)</span><br><span class="line">     &#125;,</span><br><span class="line">     err =&gt; console.log(err),</span><br><span class="line"> );</span><br><span class="line"></span><br><span class="line"> seconds.pipe(timeout(1100)) # 900小于间隔1000，会忽略，不输出值</span><br><span class="line"> .subscribe(</span><br><span class="line">     value =&gt; &#123;</span><br><span class="line">         console.log(&quot;out.....&quot;);</span><br><span class="line">         console.log(value)</span><br><span class="line">     &#125;,</span><br><span class="line">     err =&gt; console.log(err),</span><br><span class="line"> );</span><br><span class="line"></span><br><span class="line">//output</span><br><span class="line"> time.....</span><br><span class="line"> TimeInterval &#123; value: 0, interval: 1007 &#125;</span><br><span class="line"> out.....</span><br><span class="line"> 0</span><br><span class="line"> time.....</span><br><span class="line"> TimeInterval &#123; value: 1, interval: 1005 &#125;</span><br><span class="line"> out.....</span><br><span class="line"> 1</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="timeoutWith"><a href="#timeoutWith" class="headerlink" title="timeoutWith"></a>timeoutWith</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">import &#123; interval &#125; from &#x27;rxjs&#x27;;</span><br><span class="line">import &#123; timeoutWith &#125; from &#x27;rxjs/operators&#x27;</span><br><span class="line">import &#123; of &#125; from &#x27;rxjs&#x27;;</span><br><span class="line"></span><br><span class="line">const first$ = interval(3000);</span><br><span class="line">const second$ = of(&#x27;go to the default&#x27;);</span><br><span class="line">first$.pipe(timeoutWith(2000,second$)).subscribe(console.log) # 2s内必须获取到数据，否则走默认值</span><br><span class="line">//output</span><br><span class="line">go to the default</span><br></pre></td></tr></table></figure>

<h4 id="interval"><a href="#interval" class="headerlink" title="interval"></a>interval</h4><blockquote>
<p>异步产生数据</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">import &#123; interval &#125; from &#x27;rxjs&#x27;;</span><br><span class="line">import &#123; take &#125; from &#x27;rxjs/operators&#x27;;</span><br><span class="line"></span><br><span class="line">const numbers = interval(1000);</span><br><span class="line"></span><br><span class="line">const takeFourNumbers = numbers.pipe(take(4));</span><br><span class="line"></span><br><span class="line">takeFourNumbers.subscribe(x =&gt; console.log(&#x27;Next: &#x27;, x));</span><br><span class="line"></span><br><span class="line">// Logs:</span><br><span class="line">// Next: 0</span><br><span class="line">// Next: 1</span><br><span class="line">// Next: 2</span><br><span class="line">// Next: 3</span><br></pre></td></tr></table></figure>
<h4 id="timer"><a href="#timer" class="headerlink" title="timer"></a>timer</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">import &#123; timer &#125; from &#x27;rxjs&#x27;;</span><br><span class="line"></span><br><span class="line">const numbers = timer(3000, 1000);</span><br><span class="line">numbers.subscribe(x =&gt; console.log(x));</span><br></pre></td></tr></table></figure>


<h3 id="2-创造型"><a href="#2-创造型" class="headerlink" title="2.创造型"></a>2.创造型</h3><h4 id="of-单一输出"><a href="#of-单一输出" class="headerlink" title="of - 单一输出"></a>of - 单一输出</h4><blockquote>
<p>同步产生数据<br>  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">import &#123; of &#125; from &#x27;rxjs&#x27;;</span><br><span class="line"></span><br><span class="line">of([1,2,3])</span><br><span class="line">.subscribe(</span><br><span class="line">  next =&gt; console.log(&#x27;next:&#x27;, next),</span><br><span class="line">  err =&gt; console.log(&#x27;error:&#x27;, err),</span><br><span class="line">  () =&gt; console.log(&#x27;the end&#x27;),</span><br><span class="line">);</span><br><span class="line">// result:</span><br><span class="line">// &#x27;next: [1,2,3]&#x27;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<h4 id="from-拆分输出"><a href="#from-拆分输出" class="headerlink" title="from - 拆分输出"></a>from - 拆分输出</h4><blockquote>
<p>同步产生数据<br>  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">import &#123; from, asyncScheduler &#125; from &#x27;rxjs&#x27;;</span><br><span class="line"></span><br><span class="line">console.log(&#x27;start&#x27;);</span><br><span class="line"></span><br><span class="line">const array = [10, 20, 30];</span><br><span class="line">const result = from(array, asyncScheduler);</span><br><span class="line"></span><br><span class="line">result.subscribe(x =&gt; console.log(x));</span><br><span class="line"></span><br><span class="line">console.log(&#x27;end&#x27;);</span><br><span class="line"></span><br><span class="line">// Logs:</span><br><span class="line">// start</span><br><span class="line">// end</span><br><span class="line">// 10</span><br><span class="line">// 20</span><br><span class="line">// 30</span><br></pre></td></tr></table></figure></p>
</blockquote>
<h4 id="ajax"><a href="#ajax" class="headerlink" title="ajax"></a>ajax</h4><blockquote>
<p>异步产生数据</p>
</blockquote>
<ul>
<li>ajax   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">import &#123; ajax &#125; from &#x27;rxjs/ajax&#x27;;</span><br><span class="line">import &#123; map, catchError &#125; from &#x27;rxjs/operators&#x27;;</span><br><span class="line">import &#123; of &#125; from &#x27;rxjs&#x27;;</span><br><span class="line"></span><br><span class="line">const obs$ = ajax(`https://api.github.com/users?per_page=5`).pipe(</span><br><span class="line">  map(userResponse =&gt; console.log(&#x27;users: &#x27;, userResponse)),</span><br><span class="line">  catchError(error =&gt; &#123;</span><br><span class="line">    console.log(&#x27;error: &#x27;, error);</span><br><span class="line">    return of(error);</span><br><span class="line">  &#125;)</span><br><span class="line">);</span><br></pre></td></tr></table></figure></li>
<li>getJson   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">import &#123; ajax &#125; from &#x27;rxjs/ajax&#x27;;</span><br><span class="line">import &#123; map, catchError &#125; from &#x27;rxjs/operators&#x27;;</span><br><span class="line">import &#123; of &#125; from &#x27;rxjs&#x27;;</span><br><span class="line"></span><br><span class="line">const obs$ = ajax.getJSON(`https://api.github.com/users?per_page=5`).pipe(</span><br><span class="line">  map(userResponse =&gt; console.log(&#x27;users: &#x27;, userResponse)),</span><br><span class="line">  catchError(error =&gt; &#123;</span><br><span class="line">    console.log(&#x27;error: &#x27;, error);</span><br><span class="line">    return of(error);</span><br><span class="line">  &#125;)</span><br><span class="line">);</span><br></pre></td></tr></table></figure></li>
<li>类jquery写法   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">import &#123; ajax &#125; from &#x27;rxjs/ajax&#x27;;</span><br><span class="line">import &#123; of &#125; from &#x27;rxjs&#x27;;</span><br><span class="line"></span><br><span class="line">const users = ajax(&#123;</span><br><span class="line">  url: &#x27;https://httpbin.org/delay/2&#x27;,</span><br><span class="line">  method: &#x27;POST&#x27;,</span><br><span class="line">  headers: &#123;</span><br><span class="line">    &#x27;Content-Type&#x27;: &#x27;application/json&#x27;,</span><br><span class="line">    &#x27;rxjs-custom-header&#x27;: &#x27;Rxjs&#x27;</span><br><span class="line">  &#125;,</span><br><span class="line">  body: &#123;</span><br><span class="line">    rxjs: &#x27;Hello World!&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;).pipe(</span><br><span class="line">  map(response =&gt; console.log(&#x27;response: &#x27;, response)),</span><br><span class="line">  catchError(error =&gt; &#123;</span><br><span class="line">    console.log(&#x27;error: &#x27;, error);</span><br><span class="line">    return of(error);</span><br><span class="line">  &#125;)</span><br><span class="line">);</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="3-转换型"><a href="#3-转换型" class="headerlink" title="3.转换型"></a>3.转换型</h3><h4 id="mergeMap-map-mergeAll"><a href="#mergeMap-map-mergeAll" class="headerlink" title="mergeMap &#x3D; map + mergeAll"></a>mergeMap &#x3D; map + mergeAll</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">import &#123; of, interval &#125; from &#x27;rxjs&#x27;;</span><br><span class="line">import &#123; mergeMap, map &#125; from &#x27;rxjs/operators&#x27;;</span><br><span class="line"></span><br><span class="line">const letters = of(&#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;);</span><br><span class="line">const result = letters.pipe(</span><br><span class="line">  mergeMap(x =&gt; interval(1000).pipe(map(i =&gt; x+i))),</span><br><span class="line">);</span><br><span class="line">result.subscribe(x =&gt; console.log(x));</span><br><span class="line"></span><br><span class="line">//output</span><br><span class="line">a0</span><br><span class="line">b0</span><br><span class="line">c0</span><br><span class="line">a1</span><br><span class="line">b1</span><br><span class="line">c1</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="concatMap-map-concatAll"><a href="#concatMap-map-concatAll" class="headerlink" title="concatMap &#x3D; map + concatAll"></a>concatMap &#x3D; map + concatAll</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">import &#123; of &#125; from &#x27;rxjs&#x27;;</span><br><span class="line">import &#123; concatMap, delay, mergeMap &#125; from &#x27;rxjs/operators&#x27;;</span><br><span class="line"></span><br><span class="line">const source = of(2000, 1000);</span><br><span class="line">// map value from source into inner observable, when complete emit result and move to next</span><br><span class="line">const example = source.pipe(</span><br><span class="line">  concatMap(val =&gt; of(`Delayed by: $&#123;val&#125;ms`).pipe(delay(val)))</span><br><span class="line">);</span><br><span class="line">const subscribe = example.subscribe(val =&gt;</span><br><span class="line">  console.log(`With concatMap: $&#123;val&#125;`)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">const mergeMapExample = source</span><br><span class="line">  .pipe(</span><br><span class="line">    // just so we can log this after the first example has run</span><br><span class="line">    delay(5000),</span><br><span class="line">    mergeMap(val =&gt; of(`Delayed by: $&#123;val&#125;ms`).pipe(delay(val)))</span><br><span class="line">  )</span><br><span class="line">  .subscribe(val =&gt; console.log(`With mergeMap: $&#123;val&#125;`));</span><br><span class="line"></span><br><span class="line">  //output</span><br><span class="line">// With concatMap: Delayed by: 2000ms</span><br><span class="line">// With concatMap: Delayed by: 1000ms</span><br><span class="line">// With mergeMap: Delayed by: 1000ms  1s延迟短，提前输出</span><br><span class="line">// With mergeMap: Delayed by: 2000ms</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="switchMap-map-switchAll"><a href="#switchMap-map-switchAll" class="headerlink" title="switchMap &#x3D; map + switchAll"></a>switchMap &#x3D; map + switchAll</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">// RxJS v6+</span><br><span class="line">import &#123; timer, interval, of &#125; from &#x27;rxjs&#x27;;</span><br><span class="line">import &#123; switchMap, tap &#125; from &#x27;rxjs/operators&#x27;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">console.log(&quot;time 0....&quot;,new Date().toLocaleTimeString());</span><br><span class="line">timer(1000,4000).pipe( //延迟一段时间，产生自增的整数</span><br><span class="line"> tap(() =&gt; &#123;</span><br><span class="line">     console.log(&quot;time 1....&quot;,new Date().toLocaleTimeString());</span><br><span class="line"> &#125;),</span><br><span class="line"> switchMap(</span><br><span class="line">    _ =&gt; interval(1000).pipe(tap((rs)=&gt; &#123;console.log(&#x27;inner value....&#x27;,rs)&#125;)), //特定间隔，产生递增整数 </span><br><span class="line">    (outerValue, innerValue, outerIndex, innerIndex) =&gt; (&#123;</span><br><span class="line">      outerValue,</span><br><span class="line">      innerValue,</span><br><span class="line">      outerIndex,</span><br><span class="line">      innerIndex</span><br><span class="line">    &#125;)</span><br><span class="line">  )</span><br><span class="line"> ).subscribe((res) =&gt; &#123;</span><br><span class="line">    console.log(&quot;final res....&quot;,res);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">//output</span><br><span class="line">time 0.... 5:21:59 PM</span><br><span class="line">time 1.... 5:22:00 PM</span><br><span class="line">inner value.... 0</span><br><span class="line">final res.... &#123; outerValue: 0, innerValue: 0, outerIndex: 0, innerIndex: 0 &#125;</span><br><span class="line">inner value.... 1</span><br><span class="line">final res.... &#123; outerValue: 0, innerValue: 1, outerIndex: 0, innerIndex: 1 &#125;</span><br><span class="line">inner value.... 2</span><br><span class="line">final res.... &#123; outerValue: 0, innerValue: 2, outerIndex: 0, innerIndex: 2 &#125;</span><br><span class="line">time 1.... 5:22:04 PM</span><br><span class="line">inner value.... 0</span><br><span class="line">final res.... &#123; outerValue: 1, innerValue: 0, outerIndex: 1, innerIndex: 0 &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="exhaustMap-map-exhaustAll"><a href="#exhaustMap-map-exhaustAll" class="headerlink" title="exhaustMap &#x3D; map + exhaustAll"></a>exhaustMap &#x3D; map + exhaustAll</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">// RxJS v6+</span><br><span class="line">import &#123; interval &#125; from &#x27;rxjs&#x27;;</span><br><span class="line">import &#123; exhaustMap, tap, take &#125; from &#x27;rxjs/operators&#x27;;</span><br><span class="line"></span><br><span class="line">const firstInterval = interval(1000).pipe(take(10));</span><br><span class="line">const secondInterval = interval(1000).pipe(take(2));</span><br><span class="line"></span><br><span class="line">const exhaustSub = firstInterval</span><br><span class="line">  .pipe(</span><br><span class="line">    exhaustMap(f =&gt; &#123;</span><br><span class="line">      console.log(`Emission Corrected of first interval: $&#123;f&#125;`);</span><br><span class="line">      return secondInterval; //激活第二个，会忽略第一个</span><br><span class="line">    &#125;)</span><br><span class="line">  )</span><br><span class="line">  .subscribe(val =&gt; console.log(val));</span><br><span class="line"></span><br><span class="line">//output</span><br><span class="line">Emission Corrected of first interval: 0</span><br><span class="line">0</span><br><span class="line">1</span><br><span class="line">Emission Corrected of first interval: 2</span><br><span class="line">0</span><br><span class="line">1</span><br><span class="line">Emission Corrected of first interval: 4</span><br><span class="line">0</span><br><span class="line">1</span><br><span class="line">Emission Corrected of first interval: 6</span><br><span class="line">0</span><br><span class="line">1</span><br><span class="line">Emission Corrected of first interval: 8</span><br><span class="line">0</span><br><span class="line">1</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="mapTo"><a href="#mapTo" class="headerlink" title="mapTo"></a>mapTo</h4><ul>
<li>修改值<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">import &#123; fromEvent &#125; from &#x27;rxjs&#x27;;</span><br><span class="line">import &#123; mapTo &#125; from &#x27;rxjs/operators&#x27;;</span><br><span class="line"></span><br><span class="line">const clicks = fromEvent(document, &#x27;click&#x27;);</span><br><span class="line">const greetings = clicks.pipe(mapTo(&#x27;Hi&#x27;));</span><br><span class="line">greetings.subscribe(x =&gt; console.log(x));</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="map"><a href="#map" class="headerlink" title="map"></a>map</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">import &#123; combineLatest, of &#125; from &#x27;rxjs&#x27;;</span><br><span class="line">import &#123; map, tap &#125; from &#x27;rxjs/operators&#x27;;</span><br><span class="line"> </span><br><span class="line">const weight = of(70, 72, 76, 79, 75);</span><br><span class="line">const height = of(1.76, 1.77, 1.78,1.8);</span><br><span class="line">const bmi = combineLatest(weight, height).pipe(</span><br><span class="line">  tap(([w,h]) =&gt; &#123;</span><br><span class="line">      console.log(`w:$&#123;w&#125;,h:$&#123;h&#125;`);</span><br><span class="line">  &#125;),</span><br><span class="line">  map(([w, h]) =&gt; w / (h * h)),</span><br><span class="line">);</span><br><span class="line">bmi.subscribe(x =&gt; console.log(&#x27;BMI is &#x27; + x));</span><br><span class="line"> </span><br><span class="line">// With output to console:</span><br><span class="line">w:75,h:1.76</span><br><span class="line">BMI is 24.212293388429753</span><br><span class="line">w:75,h:1.77</span><br><span class="line">BMI is 23.93948099205209</span><br><span class="line">w:75,h:1.78</span><br><span class="line">BMI is 23.671253629592222</span><br><span class="line">w:75,h:1.8</span><br><span class="line">BMI is 23.148148148148145</span><br></pre></td></tr></table></figure>
<h3 id="4-联合型"><a href="#4-联合型" class="headerlink" title="4.联合型"></a>4.联合型</h3><h4 id="combineLatest"><a href="#combineLatest" class="headerlink" title="combineLatest"></a>combineLatest</h4><blockquote>
<p>适用场景： 依赖多个输入，产出新的结论</p>
</blockquote>
<h5 id="数据整合交给下游"><a href="#数据整合交给下游" class="headerlink" title="数据整合交给下游"></a>数据整合交给下游</h5> <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"> import &#123; timer, combineLatest &#125; from &#x27;rxjs&#x27;;</span><br><span class="line">​</span><br><span class="line">// timerOne emits first value at 1s, then once every 4s</span><br><span class="line">const timerOne$ = timer(1000, 4000);</span><br><span class="line">// timerTwo emits first value at 2s, then once every 4s</span><br><span class="line">const timerTwo$ = timer(2000, 4000);</span><br><span class="line">// timerThree emits first value at 3s, then once every 4s</span><br><span class="line">const timerThree$ = timer(3000, 4000);</span><br><span class="line">​</span><br><span class="line">// when one timer emits, emit the latest values from each timer as an array</span><br><span class="line">combineLatest(timerOne$, timerTwo$, timerThree$).subscribe(</span><br><span class="line">  ([timerValOne, timerValTwo, timerValThree]) =&gt; &#123;</span><br><span class="line">    /*</span><br><span class="line">      Example:</span><br><span class="line">    timerThree first tick: &#x27;Timer One Latest: 0, Timer Two Latest: 0, Timer Three Latest: 0</span><br><span class="line">    timerOne second tick: &#x27;Timer One Latest: 1, Timer Two Latest: 0, Timer Three Latest: 0</span><br><span class="line">    timerTwo second tick: &#x27;Timer One Latest: 1, Timer Two Latest: 1, Timer Three Latest: 0</span><br><span class="line">  */</span><br><span class="line">    console.log(</span><br><span class="line">      `Timer One Latest: $&#123;timerValOne&#125;,</span><br><span class="line">     Timer Two Latest: $&#123;timerValTwo&#125;,</span><br><span class="line">     Timer Three Latest: $&#123;timerValThree&#125;`</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<h5 id="整合好数据，交给下游"><a href="#整合好数据，交给下游" class="headerlink" title="整合好数据，交给下游"></a>整合好数据，交给下游</h5><blockquote>
<p> 入参observabel数组<br> <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"> // RxJS v6+</span><br><span class="line">import &#123; timer, combineLatest &#125; from &#x27;rxjs&#x27;;</span><br><span class="line">​</span><br><span class="line">const timerOne$ = timer(1000, 4000);</span><br><span class="line">const timerTwo$ = timer(2000, 4000);</span><br><span class="line">const timerThree$ = timer(3000, 4000);</span><br><span class="line">​</span><br><span class="line">combineLatest(</span><br><span class="line">  timerOne$,</span><br><span class="line">  timerTwo$,</span><br><span class="line">  timerThree$,</span><br><span class="line">  // combineLatest also takes an optional projection function</span><br><span class="line">  (one, two, three) =&gt; &#123;</span><br><span class="line">    return `Timer One (Proj) Latest: $&#123;one&#125;, </span><br><span class="line">              Timer Two (Proj) Latest: $&#123;two&#125;, </span><br><span class="line">              Timer Three (Proj) Latest: $&#123;three&#125;`;</span><br><span class="line">  &#125;</span><br><span class="line">).subscribe(console.log);</span><br></pre></td></tr></table></figure></p>
</blockquote>
<h4 id="concat-队列形式"><a href="#concat-队列形式" class="headerlink" title="concat - 队列形式"></a>concat - 队列形式</h4><blockquote>
<p>适用于： 先到先得，队列形式数据处理<br>返回Observable</p>
</blockquote>
<h5 id="前一个不结束，后一个永无机会"><a href="#前一个不结束，后一个永无机会" class="headerlink" title="前一个不结束，后一个永无机会"></a>前一个不结束，后一个永无机会</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">// RxJS v6+</span><br><span class="line">import &#123; interval, of, concat &#125; from &#x27;rxjs&#x27;;</span><br><span class="line">​</span><br><span class="line">// when source never completes, any subsequent observables never run</span><br><span class="line">concat(interval(1000), of(&#x27;This&#x27;, &#x27;Never&#x27;, &#x27;Runs&#x27;))</span><br><span class="line">  // log: 1,2,3,4.....</span><br><span class="line">  .subscribe(console.log);</span><br></pre></td></tr></table></figure>

<h5 id="倒计时"><a href="#倒计时" class="headerlink" title="倒计时"></a>倒计时</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">// RxJS v6+</span><br><span class="line">import &#123; concat, empty &#125; from &#x27;rxjs&#x27;;</span><br><span class="line">import &#123; delay, startWith &#125; from &#x27;rxjs/operators&#x27;;</span><br><span class="line">​</span><br><span class="line">// elems</span><br><span class="line">const userMessage = document.getElementById(&#x27;message&#x27;);</span><br><span class="line">// helper</span><br><span class="line">const delayedMessage = (message, delayedTime = 1000) =&gt; &#123;</span><br><span class="line">  return empty().pipe(startWith(message), delay(delayedTime));</span><br><span class="line">&#125;;</span><br><span class="line">​</span><br><span class="line">concat(</span><br><span class="line">  delayedMessage(&#x27;Get Ready!&#x27;),</span><br><span class="line">  delayedMessage(3),</span><br><span class="line">  delayedMessage(2),</span><br><span class="line">  delayedMessage(1),</span><br><span class="line">  delayedMessage(&#x27;Go!&#x27;),</span><br><span class="line">  delayedMessage(&#x27;&#x27;, 2000)</span><br><span class="line">).subscribe((message: any) =&gt; (userMessage.innerHTML = message));</span><br></pre></td></tr></table></figure>
<h4 id="merge-先到先输出"><a href="#merge-先到先输出" class="headerlink" title="merge - 先到先输出"></a>merge - 先到先输出</h4><blockquote>
<p>先到先输出,不论书写位置，一个个输出，非数组形式<br>返回Observable</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">import &#123; of, merge, concat &#125; from &#x27;rxjs&#x27;;</span><br><span class="line">import &#123; mapTo, delay, concatAll, mergeAll &#125; from &#x27;rxjs/operators&#x27;;</span><br><span class="line"></span><br><span class="line">//emit one item</span><br><span class="line">const example = of(null);</span><br><span class="line"></span><br><span class="line">merge(</span><br><span class="line">  example.pipe(mapTo(&#x27;Hello --- 1&#x27;)),</span><br><span class="line">  example.pipe(mapTo(&#x27;World1!--- 1&#x27;),delay(1300)),</span><br><span class="line">  example.pipe(mapTo(&#x27;Goodbye --- 1&#x27;),delay(500)),</span><br><span class="line">  example.pipe(mapTo(&#x27;World!2 -- 1&#x27;),delay(300))</span><br><span class="line">).subscribe(val =&gt; console.log(val));;</span><br><span class="line"></span><br><span class="line">//output</span><br><span class="line">Hello --- 1</span><br><span class="line">World!2 -- 1</span><br><span class="line">Goodbye --- 1</span><br><span class="line">World1!--- 1</span><br></pre></td></tr></table></figure>

<h4 id="exhaust"><a href="#exhaust" class="headerlink" title="exhaust"></a>exhaust</h4><blockquote>
<p>返回Observable</p>
</blockquote>
<h4 id="withLatestFrom"><a href="#withLatestFrom" class="headerlink" title="withLatestFrom"></a>withLatestFrom</h4><blockquote>
<p>适用于： 多个输入源，但是只有一个主导<br>返回 OperatorFunction</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">import &#123; timeInterval, timeout, withLatestFrom &#125; from &quot;rxjs/operators&quot;;</span><br><span class="line">import &#123; interval, of &#125; from &quot;rxjs&quot;;</span><br><span class="line"></span><br><span class="line">const seconds = interval(1000);</span><br><span class="line"></span><br><span class="line">const first = interval(500);</span><br><span class="line"></span><br><span class="line">const obs$ = first.pipe(withLatestFrom(seconds));</span><br><span class="line">obs$.subscribe(res =&gt; &#123;</span><br><span class="line">    console.log(&quot;res...&quot;,res);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">//output</span><br><span class="line">res... [ 1, 0 ]</span><br><span class="line">res... [ 2, 0 ]</span><br><span class="line">res... [ 3, 1 ]</span><br><span class="line">res... [ 4, 1 ]</span><br><span class="line">res... [ 5, 2 ]</span><br><span class="line">res... [ 6, 2 ]</span><br><span class="line">res... [ 7, 3 ]</span><br><span class="line">res... [ 8, 3 ]</span><br><span class="line">res... [ 9, 4 ]</span><br></pre></td></tr></table></figure>

<h4 id="concatAll"><a href="#concatAll" class="headerlink" title="concatAll"></a>concatAll</h4><blockquote>
<p>返回 OperatorFunction</p>
</blockquote>
<h4 id="mergeAll"><a href="#mergeAll" class="headerlink" title="mergeAll"></a>mergeAll</h4><blockquote>
<p>返回 OperatorFunction</p>
</blockquote>
<h4 id="exhaustAll"><a href="#exhaustAll" class="headerlink" title="exhaustAll"></a>exhaustAll</h4><blockquote>
<p>返回 OperatorFunction</p>
</blockquote>
<h4 id="switchAll"><a href="#switchAll" class="headerlink" title="switchAll"></a>switchAll</h4><blockquote>
<p>返回 OperatorFunction</p>
</blockquote>
<h4 id="forkJoin-只取最终值"><a href="#forkJoin-只取最终值" class="headerlink" title="forkJoin - 只取最终值"></a>forkJoin - 只取最终值</h4><blockquote>
<p> 入参observabel数组</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">import &#123; forkJoin, of, timer &#125; from &#x27;rxjs&#x27;;</span><br><span class="line"></span><br><span class="line">const observable = forkJoin(&#123;</span><br><span class="line">  foo: of(1, 2, 3, 4),</span><br><span class="line">  bar: Promise.resolve(8),</span><br><span class="line">  baz: timer(4000),</span><br><span class="line">&#125;);</span><br><span class="line">observable.subscribe(&#123;</span><br><span class="line"> next: value =&gt; console.log(value),</span><br><span class="line"> complete: () =&gt; console.log(&#x27;This is how it ends!&#x27;),</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// Logs:</span><br><span class="line">// &#123; foo: 4, bar: 8, baz: 0 &#125; after 4 seconds</span><br><span class="line">// &quot;This is how it ends!&quot; immediately after</span><br></pre></td></tr></table></figure>

<h4 id="startWith"><a href="#startWith" class="headerlink" title="startWith"></a>startWith</h4><blockquote>
<p>适用于： 添加特定的数据</p>
</blockquote>
<h5 id="添加单个前置数据-hello-world"><a href="#添加单个前置数据-hello-world" class="headerlink" title="添加单个前置数据 - hello world"></a>添加单个前置数据 - hello world</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">// RxJS v6+</span><br><span class="line">import &#123; startWith, scan &#125; from &#x27;rxjs/operators&#x27;;</span><br><span class="line">import &#123; of &#125; from &#x27;rxjs&#x27;;</span><br><span class="line">​</span><br><span class="line">//emit (&#x27;World!&#x27;, &#x27;Goodbye&#x27;, &#x27;World!&#x27;)</span><br><span class="line">const source = of(&#x27;World!&#x27;, &#x27;Goodbye&#x27;, &#x27;World!&#x27;);</span><br><span class="line">//start with &#x27;Hello&#x27;, concat current string to previous</span><br><span class="line">const example = source.pipe(</span><br><span class="line">  startWith(&#x27;Hello&#x27;),</span><br><span class="line">  scan((acc, curr) =&gt; `$&#123;acc&#125; $&#123;curr&#125;`)</span><br><span class="line">);</span><br><span class="line">/*</span><br><span class="line">  output:</span><br><span class="line">  &quot;Hello&quot;</span><br><span class="line">  &quot;Hello World!&quot;</span><br><span class="line">  &quot;Hello World! Goodbye&quot;</span><br><span class="line">  &quot;Hello World! Goodbye World!&quot;</span><br><span class="line">*/</span><br><span class="line">const subscribe = example.subscribe(val =&gt; console.log(val));</span><br></pre></td></tr></table></figure>
<h5 id="添加多个前置数据"><a href="#添加多个前置数据" class="headerlink" title="添加多个前置数据"></a>添加多个前置数据</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">// RxJS v6+</span><br><span class="line">import &#123; startWith &#125; from &#x27;rxjs/operators&#x27;;</span><br><span class="line">import &#123; interval &#125; from &#x27;rxjs&#x27;;</span><br><span class="line">​</span><br><span class="line">//emit values in sequence every 1s</span><br><span class="line">const source = interval(1000);</span><br><span class="line">//start with -3, -2, -1</span><br><span class="line">const example = source.pipe(startWith(-3, -2, -1));</span><br><span class="line">//output: -3, -2, -1, 0, 1, 2....</span><br><span class="line">const subscribe = example.subscribe(val =&gt; console.log(val));</span><br></pre></td></tr></table></figure>

<h3 id="5-过滤型"><a href="#5-过滤型" class="headerlink" title="5.过滤型"></a>5.过滤型</h3><h4 id="filter"><a href="#filter" class="headerlink" title="filter"></a>filter</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">import &#123; from &#125; from &#x27;rxjs&#x27;;</span><br><span class="line">import &#123; filter &#125; from &#x27;rxjs/operators&#x27;;</span><br><span class="line"></span><br><span class="line">const source = from([</span><br><span class="line">  &#123; name: &#x27;Joe&#x27;, age: 31 &#125;,</span><br><span class="line">  &#123; name: &#x27;Bob&#x27;, age: 25 &#125;</span><br><span class="line">]);</span><br><span class="line">const example = source.pipe(filter((person,index) =&gt; &#123; </span><br><span class="line">    const res = person.age &gt;= 30; </span><br><span class="line">    console.log(`person info.....`,person,index);</span><br><span class="line">    return res; </span><br><span class="line">&#125; ));</span><br><span class="line">const subscribe = example.subscribe(val =&gt; console.log(`final result Over 30: $&#123;val.name&#125;`));</span><br><span class="line"></span><br><span class="line">//output</span><br><span class="line">person info..... &#123; name: &#x27;Joe&#x27;, age: 31 &#125; 0</span><br><span class="line">final result Over 30: Joe</span><br><span class="line">person info..... &#123; name: &#x27;Bob&#x27;, age: 25 &#125; 1</span><br></pre></td></tr></table></figure>
<h3 id="6-条件判定"><a href="#6-条件判定" class="headerlink" title="6.条件判定"></a>6.条件判定</h3><h4 id="every"><a href="#every" class="headerlink" title="every"></a>every</h4><ul>
<li>每一个都需要满足条件才true  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">import &#123; of &#125; from &#x27;rxjs&#x27;;</span><br><span class="line">import &#123; every &#125; from &#x27;rxjs/operators&#x27;;</span><br><span class="line"></span><br><span class="line">of(1, 2, 3, 4, 5, 6).pipe(</span><br><span class="line">    every(x =&gt; x &lt; 5),</span><br><span class="line">)</span><br><span class="line">.subscribe(x =&gt; console.log(x)); // -&gt; false</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="find、findIndex"><a href="#find、findIndex" class="headerlink" title="find、findIndex"></a>find、findIndex</h4><ul>
<li>找到第一个满足条件的就行  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">import &#123; fromEvent &#125; from &#x27;rxjs&#x27;;</span><br><span class="line">import &#123; find &#125; from &#x27;rxjs/operators&#x27;;</span><br><span class="line"></span><br><span class="line">const clicks = fromEvent(document, &#x27;click&#x27;);</span><br><span class="line">const result = clicks.pipe(find(ev =&gt; ev.target.tagName === &#x27;DIV&#x27;));</span><br><span class="line">result.subscribe(x =&gt; console.log(x));</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="isEmpty"><a href="#isEmpty" class="headerlink" title="isEmpty"></a>isEmpty</h4><ul>
<li>判断Observable是否为空  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">import &#123; Subject &#125; from &#x27;rxjs&#x27;;</span><br><span class="line">import &#123; isEmpty &#125; from &#x27;rxjs/operators&#x27;;</span><br><span class="line"></span><br><span class="line">const source = new Subject&lt;string&gt;();</span><br><span class="line">const result = source.pipe(isEmpty());</span><br><span class="line">source.subscribe(x =&gt; console.log(x));</span><br><span class="line">result.subscribe(x =&gt; console.log(x));</span><br><span class="line">source.next(&#x27;a&#x27;);</span><br><span class="line">source.next(&#x27;b&#x27;);</span><br><span class="line">source.next(&#x27;c&#x27;);</span><br><span class="line">source.complete();</span><br><span class="line"></span><br><span class="line">// Results in:</span><br><span class="line">// a</span><br><span class="line">// false</span><br><span class="line">// b</span><br><span class="line">// c</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="iif"><a href="#iif" class="headerlink" title="iif"></a>iif</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">import &#123; iif, of, interval &#125; from &#x27;rxjs&#x27;;</span><br><span class="line">import &#123; mergeMap &#125; from &#x27;rxjs/operators&#x27;;</span><br><span class="line"></span><br><span class="line">const r$ = of(&#x27;R&#x27;);</span><br><span class="line">const x$ = of(&#x27;X&#x27;);</span><br><span class="line"></span><br><span class="line">interval(1000)</span><br><span class="line">  .pipe(mergeMap(v =&gt; iif(() =&gt; v % 4 === 0, r$, x$)))</span><br><span class="line">  .subscribe(console.log);</span><br><span class="line">//output </span><br><span class="line">R</span><br><span class="line">X</span><br><span class="line">R</span><br><span class="line">X</span><br></pre></td></tr></table></figure>

<h4 id="defaultIfEmpty"><a href="#defaultIfEmpty" class="headerlink" title="defaultIfEmpty"></a>defaultIfEmpty</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">import &#123; defaultIfEmpty &#125; from &#x27;rxjs/operators&#x27;;</span><br><span class="line">import &#123; empty &#125; from &#x27;rxjs&#x27;;</span><br><span class="line">import &#123; of, merge &#125; from &#x27;rxjs&#x27;;</span><br><span class="line"></span><br><span class="line">const exampleOne = of().pipe(defaultIfEmpty(&#x27;Observable.of() Empty!&#x27;));</span><br><span class="line">const example = empty().pipe(defaultIfEmpty(&#x27;Observable.empty()!&#x27;));</span><br><span class="line"></span><br><span class="line">merge(</span><br><span class="line">    example,</span><br><span class="line">    exampleOne</span><br><span class="line">).subscribe(console.log);</span><br><span class="line"></span><br><span class="line">//output </span><br><span class="line">Observable.empty()!</span><br><span class="line">Observable.of() Empty!</span><br></pre></td></tr></table></figure>

<h3 id="7-异常处理"><a href="#7-异常处理" class="headerlink" title="7.异常处理"></a>7.异常处理</h3><h4 id="catchError"><a href="#catchError" class="headerlink" title="catchError"></a>catchError</h4><h5 id="单一处理"><a href="#单一处理" class="headerlink" title="单一处理"></a>单一处理</h5> <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">import &#123; throwError, of &#125; from &#x27;rxjs&#x27;;</span><br><span class="line">import &#123; catchError &#125; from &#x27;rxjs/operators&#x27;;</span><br><span class="line">//emit error</span><br><span class="line">const source = throwError(&#x27;This is an error!&#x27;);</span><br><span class="line">//gracefully handle error, returning observable with error message</span><br><span class="line">const example = source.pipe(catchError(val =&gt; of(`I caught: $&#123;val&#125;`)));</span><br><span class="line">//output: &#x27;I caught: This is an error&#x27;</span><br><span class="line">const subscribe = example.subscribe(val =&gt; console.log(val));</span><br></pre></td></tr></table></figure>
<h5 id="整合其他operator"><a href="#整合其他operator" class="headerlink" title="整合其他operator"></a>整合其他operator</h5> <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">import &#123; throwError, fromEvent, of &#125; from &#x27;rxjs&#x27;;</span><br><span class="line">import &#123;</span><br><span class="line">  catchError,</span><br><span class="line">  tap,</span><br><span class="line">  switchMap,</span><br><span class="line">  mergeMap,</span><br><span class="line">  concatMap,</span><br><span class="line">  exhaustMap</span><br><span class="line">&#125; from &#x27;rxjs/operators&#x27;;</span><br><span class="line">​</span><br><span class="line">const fakeRequest$ = of().pipe(</span><br><span class="line">  tap(_ =&gt; console.log(&#x27;fakeRequest&#x27;)),</span><br><span class="line">  throwError</span><br><span class="line">);</span><br><span class="line">​</span><br><span class="line">const iWillContinueListening$ = fromEvent(</span><br><span class="line">  document.getElementById(&#x27;continued&#x27;),</span><br><span class="line">  &#x27;click&#x27;</span><br><span class="line">).pipe(</span><br><span class="line">  switchMap(_ =&gt; fakeRequest$.pipe(catchError(_ =&gt; of(&#x27;keep on clicking!!!&#x27;))))</span><br><span class="line">);</span><br><span class="line">​</span><br><span class="line">const iWillStopListening$ = fromEvent(</span><br><span class="line">  document.getElementById(&#x27;stopped&#x27;),</span><br><span class="line">  &#x27;click&#x27;</span><br><span class="line">).pipe(</span><br><span class="line">  switchMap(_ =&gt; fakeRequest$),</span><br><span class="line">  catchError(_ =&gt; of(&#x27;no more requests!!!&#x27;))</span><br><span class="line">);</span><br><span class="line">​</span><br><span class="line">iWillContinueListening$.subscribe(console.log);</span><br><span class="line">iWillStopListening$.subscribe(console.log);</span><br></pre></td></tr></table></figure>

<h4 id="retry"><a href="#retry" class="headerlink" title="retry"></a>retry</h4><h5 id="设置重试次数"><a href="#设置重试次数" class="headerlink" title="设置重试次数"></a>设置重试次数</h5> <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"> // RxJS v6+</span><br><span class="line">import &#123; interval, of, throwError &#125; from &#x27;rxjs&#x27;;</span><br><span class="line">import &#123; mergeMap, retry &#125; from &#x27;rxjs/operators&#x27;;</span><br><span class="line"></span><br><span class="line">//emit value every 1s</span><br><span class="line">const source = interval(1000);</span><br><span class="line">const example = source.pipe(</span><br><span class="line">  mergeMap(val =&gt; &#123;</span><br><span class="line">    //throw error for demonstration</span><br><span class="line">    if (val &gt; 5) &#123;</span><br><span class="line">      return throwError(&#x27;Error!&#x27;);</span><br><span class="line">    &#125;</span><br><span class="line">    return of(val);</span><br><span class="line">  &#125;),</span><br><span class="line">  //retry 2 times on error</span><br><span class="line">  retry(2)</span><br><span class="line">);</span><br><span class="line">/*</span><br><span class="line">  output:</span><br><span class="line">  0..1..2..3..4..5..</span><br><span class="line">  0..1..2..3..4..5..</span><br><span class="line">  0..1..2..3..4..5..</span><br><span class="line">  &quot;Error!: Retried 2 times then quit!&quot;</span><br><span class="line">*/</span><br><span class="line">const subscribe = example.subscribe(&#123;</span><br><span class="line">  next: val =&gt; console.log(val),</span><br><span class="line">  error: val =&gt; console.log(`$&#123;val&#125;: Retried 2 times then quit!`)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="retryWhen"><a href="#retryWhen" class="headerlink" title="retryWhen"></a>retryWhen</h4><h5 id="delayWhen-1"><a href="#delayWhen-1" class="headerlink" title="delayWhen"></a>delayWhen</h5> <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"> // RxJS v6+</span><br><span class="line">import &#123; timer, interval &#125; from &#x27;rxjs&#x27;;</span><br><span class="line">import &#123; map, tap, retryWhen, delayWhen &#125; from &#x27;rxjs/operators&#x27;;</span><br><span class="line"></span><br><span class="line">//emit value every 1s</span><br><span class="line">const source = interval(1000);</span><br><span class="line">const example = source.pipe(</span><br><span class="line">  map(val =&gt; &#123;</span><br><span class="line">    if (val &gt; 5) &#123;</span><br><span class="line">      //error will be picked up by retryWhen</span><br><span class="line">      throw val;</span><br><span class="line">    &#125;</span><br><span class="line">    return val;</span><br><span class="line">  &#125;),</span><br><span class="line">  retryWhen(errors =&gt;</span><br><span class="line">    errors.pipe(</span><br><span class="line">      //log error message</span><br><span class="line">      tap(val =&gt; console.log(`Value $&#123;val&#125; was too high!`)),</span><br><span class="line">      //restart in 6 seconds</span><br><span class="line">      delayWhen(val =&gt; timer(val * 1000))</span><br><span class="line">    )</span><br><span class="line">  )</span><br><span class="line">);</span><br><span class="line">/*</span><br><span class="line">  output:</span><br><span class="line">  0</span><br><span class="line">  1</span><br><span class="line">  2</span><br><span class="line">  3</span><br><span class="line">  4</span><br><span class="line">  5</span><br><span class="line">  &quot;Value 6 was too high!&quot;</span><br><span class="line">  --Wait 6 seconds then repeat</span><br><span class="line">*/</span><br><span class="line">const subscribe = example.subscribe(val =&gt; console.log(val));</span><br></pre></td></tr></table></figure>
<h3 id="8-自定义类型"><a href="#8-自定义类型" class="headerlink" title="8.自定义类型"></a>8.自定义类型</h3><h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><h4 id="Rxjs"><a href="#Rxjs" class="headerlink" title="Rxjs"></a><a target="_blank" rel="noopener" href="https://www.learnrxjs.io/learn-rxjs/operators/combination/combinelatest">Rxjs</a></h4></section>
     <!-- 文章版权声明 start -->
     <div class="copyright">
      <div class="copy-item">本文作者：前端analysis</div>
      <div class="copy-item">联系邮箱：<a href = "mailto: cheonghu@126.com">cheonghu@126.com </a></div>
      <div class="copy-item">版权声明： 本文章除特别声明外，均采用 CC BY-NC-SA 4.0 许可协议。转载请注明出处！</div>
    </div>
    <!-- copyright end -->
    <!-- Tags START -->
    
      <div class="tags">
        <span>Tags:</span>
        
  <a target="_blank" href="/tags#angular" >
    <span class="tag-code">angular</span>
  </a>

  <a target="_blank" href="/tags#rxjs" >
    <span class="tag-code">rxjs</span>
  </a>

      </div>
    
    <!-- Tags END -->
    <!-- NAV START -->
    
  <div class="nav-container">
    <!-- reverse left and right to put prev and next in a more logic postition -->
    
      <a target="_blank" class="nav-left" href="/2020/07/14/devops_skills/docker/%E3%80%8ADocker%E3%80%8B-%20Docker+Sails+mongo%E5%BC%80%E5%8F%91Rest%20api%E8%BD%BB%E6%9D%BE%E5%85%A5%E9%97%A8/">
        <span class="nav-arrow">← </span>
        
          《Devops》- Docker+Sails+mongo开发Rest api 与 Servless开发 Rest api的差异
        
      </a>
    
    
      <a target="_blank" class="nav-right" href="/2020/07/17/front_skills/angular/%E3%80%8Aangular8%E3%80%8B-%20Rxjs%20%E6%93%8D%E4%BD%9C%E7%AC%A6%E7%90%86%E8%A7%A3%E6%89%8D%E6%98%AF%E7%8E%8B%E9%81%93/">
        
          《angular8》- Rxjs 操作符理解才是王道
        
        <span class="nav-arrow"> →</span>
      </a>
    
  </div>

    <!-- NAV END -->
    <!-- 打赏 START -->
    
      <div class="money-like">
        <div class="reward-btn">
          赏
          <span class="money-code">
            <span class="alipay-code">
              <div class="code-image"></div>
              <b>使用支付宝打赏</b>
            </span>
            <span class="wechat-code">
              <div class="code-image"></div>
              <b>使用微信打赏</b>
            </span>
          </span>
        </div>
        <p class="notice">若你觉得我的文章对你有帮助，欢迎点击上方按钮对我打赏</p>
      </div>
    
    <!-- 打赏 END -->
    <!-- 二维码 START -->
    
    <!-- 二维码 END -->
    
      <!-- No Comment -->
    
  </article>
  <!-- Article END -->
  <!-- Catalog START -->
  
    <aside class="catalog-container">
  <div class="toc-main">
    <strong class="toc-title">章节内容</strong>
    
      <ol class="toc-nav"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#Rxjs-%E5%85%A5%E9%97%A8"><span class="toc-nav-text">Rxjs 入门</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#%E6%93%8D%E4%BD%9C%E7%AC%A6%E5%AE%9E%E6%88%98"><span class="toc-nav-text">操作符实战</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#1-%E5%B7%A5%E5%85%B7%E6%96%B9%E6%B3%95%E5%9E%8B"><span class="toc-nav-text">1.工具方法型</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#count"><span class="toc-nav-text">count</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#reduce"><span class="toc-nav-text">reduce</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#max-min"><span class="toc-nav-text">max\min</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#tap"><span class="toc-nav-text">tap</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#repeat"><span class="toc-nav-text">repeat</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#subscribeOn%EF%BC%8C-observeOn"><span class="toc-nav-text">subscribeOn， observeOn</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#materialize"><span class="toc-nav-text">materialize</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#timestamp"><span class="toc-nav-text">timestamp</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#toArray"><span class="toc-nav-text">toArray</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E5%BB%B6%E8%BF%9F%E7%B1%BB"><span class="toc-nav-text">延迟类</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#delay"><span class="toc-nav-text">delay</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#delayWhen"><span class="toc-nav-text">delayWhen</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#timeout%E3%80%81timeInterval"><span class="toc-nav-text">timeout、timeInterval</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#timeoutWith"><span class="toc-nav-text">timeoutWith</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#interval"><span class="toc-nav-text">interval</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#timer"><span class="toc-nav-text">timer</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#2-%E5%88%9B%E9%80%A0%E5%9E%8B"><span class="toc-nav-text">2.创造型</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#of-%E5%8D%95%E4%B8%80%E8%BE%93%E5%87%BA"><span class="toc-nav-text">of - 单一输出</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#from-%E6%8B%86%E5%88%86%E8%BE%93%E5%87%BA"><span class="toc-nav-text">from - 拆分输出</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#ajax"><span class="toc-nav-text">ajax</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#3-%E8%BD%AC%E6%8D%A2%E5%9E%8B"><span class="toc-nav-text">3.转换型</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#mergeMap-map-mergeAll"><span class="toc-nav-text">mergeMap &#x3D; map + mergeAll</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#concatMap-map-concatAll"><span class="toc-nav-text">concatMap &#x3D; map + concatAll</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#switchMap-map-switchAll"><span class="toc-nav-text">switchMap &#x3D; map + switchAll</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#exhaustMap-map-exhaustAll"><span class="toc-nav-text">exhaustMap &#x3D; map + exhaustAll</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#mapTo"><span class="toc-nav-text">mapTo</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#map"><span class="toc-nav-text">map</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#4-%E8%81%94%E5%90%88%E5%9E%8B"><span class="toc-nav-text">4.联合型</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#combineLatest"><span class="toc-nav-text">combineLatest</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#%E6%95%B0%E6%8D%AE%E6%95%B4%E5%90%88%E4%BA%A4%E7%BB%99%E4%B8%8B%E6%B8%B8"><span class="toc-nav-text">数据整合交给下游</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#%E6%95%B4%E5%90%88%E5%A5%BD%E6%95%B0%E6%8D%AE%EF%BC%8C%E4%BA%A4%E7%BB%99%E4%B8%8B%E6%B8%B8"><span class="toc-nav-text">整合好数据，交给下游</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#concat-%E9%98%9F%E5%88%97%E5%BD%A2%E5%BC%8F"><span class="toc-nav-text">concat - 队列形式</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#%E5%89%8D%E4%B8%80%E4%B8%AA%E4%B8%8D%E7%BB%93%E6%9D%9F%EF%BC%8C%E5%90%8E%E4%B8%80%E4%B8%AA%E6%B0%B8%E6%97%A0%E6%9C%BA%E4%BC%9A"><span class="toc-nav-text">前一个不结束，后一个永无机会</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#%E5%80%92%E8%AE%A1%E6%97%B6"><span class="toc-nav-text">倒计时</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#merge-%E5%85%88%E5%88%B0%E5%85%88%E8%BE%93%E5%87%BA"><span class="toc-nav-text">merge - 先到先输出</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#exhaust"><span class="toc-nav-text">exhaust</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#withLatestFrom"><span class="toc-nav-text">withLatestFrom</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#concatAll"><span class="toc-nav-text">concatAll</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#mergeAll"><span class="toc-nav-text">mergeAll</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#exhaustAll"><span class="toc-nav-text">exhaustAll</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#switchAll"><span class="toc-nav-text">switchAll</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#forkJoin-%E5%8F%AA%E5%8F%96%E6%9C%80%E7%BB%88%E5%80%BC"><span class="toc-nav-text">forkJoin - 只取最终值</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#startWith"><span class="toc-nav-text">startWith</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#%E6%B7%BB%E5%8A%A0%E5%8D%95%E4%B8%AA%E5%89%8D%E7%BD%AE%E6%95%B0%E6%8D%AE-hello-world"><span class="toc-nav-text">添加单个前置数据 - hello world</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#%E6%B7%BB%E5%8A%A0%E5%A4%9A%E4%B8%AA%E5%89%8D%E7%BD%AE%E6%95%B0%E6%8D%AE"><span class="toc-nav-text">添加多个前置数据</span></a></li></ol></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#5-%E8%BF%87%E6%BB%A4%E5%9E%8B"><span class="toc-nav-text">5.过滤型</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#filter"><span class="toc-nav-text">filter</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#6-%E6%9D%A1%E4%BB%B6%E5%88%A4%E5%AE%9A"><span class="toc-nav-text">6.条件判定</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#every"><span class="toc-nav-text">every</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#find%E3%80%81findIndex"><span class="toc-nav-text">find、findIndex</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#isEmpty"><span class="toc-nav-text">isEmpty</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#iif"><span class="toc-nav-text">iif</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#defaultIfEmpty"><span class="toc-nav-text">defaultIfEmpty</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#7-%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86"><span class="toc-nav-text">7.异常处理</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#catchError"><span class="toc-nav-text">catchError</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#%E5%8D%95%E4%B8%80%E5%A4%84%E7%90%86"><span class="toc-nav-text">单一处理</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#%E6%95%B4%E5%90%88%E5%85%B6%E4%BB%96operator"><span class="toc-nav-text">整合其他operator</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#retry"><span class="toc-nav-text">retry</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#%E8%AE%BE%E7%BD%AE%E9%87%8D%E8%AF%95%E6%AC%A1%E6%95%B0"><span class="toc-nav-text">设置重试次数</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#retryWhen"><span class="toc-nav-text">retryWhen</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#delayWhen-1"><span class="toc-nav-text">delayWhen</span></a></li></ol></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#8-%E8%87%AA%E5%AE%9A%E4%B9%89%E7%B1%BB%E5%9E%8B"><span class="toc-nav-text">8.自定义类型</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E5%8F%82%E8%80%83"><span class="toc-nav-text">参考</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#Rxjs"><span class="toc-nav-text">Rxjs</span></a></li></ol></li></ol></li></ol>
    
  </div>
</aside>
  
  <!-- Catalog END -->
</main>

<script>
  (function () {
    var url = 'https://huchengzhang.com/2020/07/16/front_skills/angular/《angular8》- Rxjs 操作符实践指南/';
    var banner = ''
    if (banner !== '' && banner !== 'undefined' && banner !== 'null') {
      $('#article-banner').css({
        'background-image': 'url(' + banner + ')'
      })
    } else {
      $('#article-banner').geopattern(url)
    }
    $('.header').removeClass('fixed-header')

    // error image
    $(".markdown-content img").on('error', function() {
      $(this).attr('src', 'http://file.muyutech.com/error-img.png')
      $(this).css({
        'cursor': 'default'
      })
    })

    // zoom image
    $(".markdown-content img").on('click', function() {
      var src = $(this).attr('src')
      if (src !== 'http://file.muyutech.com/error-img.png') {
        var imageW = $(this).width()
        var imageH = $(this).height()

        var zoom = ($(window).width() * 0.95 / imageW).toFixed(2)
        zoom = zoom < 1 ? 1 : zoom
        zoom = zoom > 2 ? 2 : zoom
        var transY = (($(window).height() - imageH) / 2).toFixed(2)

        $('body').append('<div class="image-view-wrap"><div class="image-view-inner"><img src="'+ src +'" /></div></div>')
        $('.image-view-wrap').addClass('wrap-active')
        $('.image-view-wrap img').css({
          'width': `${imageW}`,
          'transform': `translate3d(0, ${transY}px, 0) scale3d(${zoom}, ${zoom}, 1)`
        })
        $('html').css('overflow', 'hidden')

        $('.image-view-wrap').on('click', function() {
          $(this).remove()
          $('html').attr('style', '')
        })
      }
    })
  })();
</script>







    <div class="scroll-top">
  <span class="arrow-icon"></span>
</div>
    <footer class="app-footer">
  <p class="copyright">
    &copy; 2026 | Proudly powered by <a target="_blank" href="/images/qrcode.jpg"> 前端analysis</a>
    <br>
  </p>
   <!-- <p class="copyright">
    <a target="_blank" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=34012302000213" >皖公网安备 34012302000213号</a> | <a href="http://www.beian.miit.gov.cn/" target="_blank">皖ICP备17012162号-9 </a>
    <br>
  </p> -->
</footer>

<script>
  function async(u, c) {
    var d = document, t = 'script',
      o = d.createElement(t),
      s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
  }
  
</script>
<script>
  async("https://cdn.bootcdn.net/ajax/libs/fastclick/1.0.6/fastclick.min.js", function(){
    FastClick.attach(document.body);
  })
</script>

<script>
  var hasLine = 'true';
  async("https://cdn.bootcdn.net/ajax/libs/highlight.js/10.1.2/highlight.min.js", function(){
    $('figure pre').each(function(i, block) {
      var figure = $(this).parents('figure');
      if (hasLine === 'false') {
        figure.find('.gutter').hide();
      }
      var lang = figure.attr('class').split(' ')[1] || 'code';
      var codeHtml = $(this).html();
      var codeTag = document.createElement('code');
      codeTag.className = lang;
      codeTag.innerHTML = codeHtml;
      $(this).attr('class', '').empty().html(codeTag);
      figure.attr('data-lang', lang.toUpperCase());
      hljs.highlightBlock(block);


      
    });
  })
</script>
<script>
  async('https://s9.cnzz.com/z_stat.php?id=1277936725&web_id=1277936725')
</script>
<!-- Baidu Tongji -->


<script src="/js/script.js"></script>

  </body>
</html>